(this.webpackJsonpproyecto=this.webpackJsonpproyecto||[]).push([[0],{32:function(e,t,r){},53:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),c=r(26),s=r.n(c),u=(r(32),r(14)),o=r(4),i=r(3),l=r.n(i),p=r(6),d=r(5),b=r(11),f=r(9),j=r.n(f),x="https://posts-pw2021.herokuapp.com/api/v1",m={};m.login=function(){var e=Object(p.a)(l.a.mark((function e(t,r){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("".concat(x,"/auth/signin"),{username:t,password:r});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),a=e.t0.response,e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),m.getAll=function(){var e=Object(p.a)(l.a.mark((function e(t){var r,n,a,c,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=r.limit,a=r.page,e.next=4,j.a.get("".concat(x,"/post/all?limit=").concat(n,"&page=").concat(a),{headers:{Authorization:"Bearer ".concat(t)}});case 4:if(200!==(c=e.sent).status){e.next=9;break}return e.abrupt("return",c.data);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m.getOwned=function(){var e=Object(p.a)(l.a.mark((function e(t){var r,n,a,c,s=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n=r.limit,a=r.page,e.next=4,j.a.get("".concat(x,"/post/owned?limit=").concat(n,"&page=").concat(a),{headers:{Authorization:"Bearer ".concat(t)}});case 4:if(200!==(c=e.sent).status){e.next=9;break}return e.abrupt("return",c.data);case 9:return e.abrupt("return",{});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m.getFavs=function(){var e=Object(p.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(x,"/post/fav"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.abrupt("return",r.data);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m.verifyToken=function(){var e=Object(p.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("".concat(x,"/auth/whoami"),{headers:{Authorization:"Bearer ".concat(t)}});case 2:if(200!==(r=e.sent).status){e.next=7;break}return e.abrupt("return",r.data);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m.create=function(){var e=Object(p.a)(l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("".concat(x,"/post/create"),Object(b.a)(Object(b.a)({},r),{},{active:r.active=!0}),{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),m.update=function(){var e=Object(p.a)(l.a.mark((function e(t,r,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.put("".concat(x,"/post/update/").concat(r),Object(b.a)({},n),{headers:{Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}(),m.likePost=function(){var e=Object(p.a)(l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.patch("https://posts-pw2021.herokuapp.com/api/v1/post/like/".concat(r),null,{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),m.favPost=function(){var e=Object(p.a)(l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.patch("https://posts-pw2021.herokuapp.com/api/v1/post/fav/".concat(r),null,{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),m.commentPost=function(){var e=Object(p.a)(l.a.mark((function e(t,r,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.patch("https://posts-pw2021.herokuapp.com/api/v1/post/comment/".concat(r),n,{headers:{Authorization:"Bearer ".concat(t)}});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r,n){return e.apply(this,arguments)}}(),m.toggleActive=function(){var e=Object(p.a)(l.a.mark((function e(t,r){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.patch("https://posts-pw2021.herokuapp.com/api/v1/post/toggle/".concat(r),null,{headers:{Authorization:"Bearer ".concat(t)}});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),m.timeSince=function(e){if(e instanceof Date||(e=new Date(e)),isNaN(e.getDate()))return"Invalid date";var t=new Date,r=(t.getTime()-e.getTime())/1e3,n=function(e,t,r){var n=["\0","January","February","March","April","May","June","July","August","September","October","November","December"],a=["\x01","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=["\x02","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s=["\x03","Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function u(e,t){var r=e+"";for(t=t||2;r.length<t;)r="0"+r;return r}var o=r?e.getUTCFullYear():e.getFullYear();t=(t=(t=t.replace(/(^|[^\\])yyyy+/g,"$1"+o)).replace(/(^|[^\\])yy/g,"$1"+o.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+o);var i=(r?e.getUTCMonth():e.getMonth())+1;t=(t=(t=(t=t.replace(/(^|[^\\])MMMM+/g,"$1"+n[0])).replace(/(^|[^\\])MMM/g,"$1"+a[0])).replace(/(^|[^\\])MM/g,"$1"+u(i))).replace(/(^|[^\\])M/g,"$1"+i);var l=r?e.getUTCDate():e.getDate();t=(t=(t=(t=t.replace(/(^|[^\\])dddd+/g,"$1"+c[0])).replace(/(^|[^\\])ddd/g,"$1"+s[0])).replace(/(^|[^\\])dd/g,"$1"+u(l))).replace(/(^|[^\\])d/g,"$1"+l);var p=r?e.getUTCHours():e.getHours(),d=p>12?p-12:0==p?12:p;t=(t=(t=(t=t.replace(/(^|[^\\])HH+/g,"$1"+u(p))).replace(/(^|[^\\])H/g,"$1"+p)).replace(/(^|[^\\])hh+/g,"$1"+u(d))).replace(/(^|[^\\])h/g,"$1"+d);var b=r?e.getUTCMinutes():e.getMinutes();t=(t=t.replace(/(^|[^\\])mm+/g,"$1"+u(b))).replace(/(^|[^\\])m/g,"$1"+b);var f=r?e.getUTCSeconds():e.getSeconds();t=(t=t.replace(/(^|[^\\])ss+/g,"$1"+u(f))).replace(/(^|[^\\])s/g,"$1"+f);var j=r?e.getUTCMilliseconds():e.getMilliseconds();t=t.replace(/(^|[^\\])fff+/g,"$1"+u(j,3)),j=Math.round(j/10),t=t.replace(/(^|[^\\])ff/g,"$1"+u(j)),j=Math.round(j/10);var x=p<12?"AM":"PM";t=(t=(t=t.replace(/(^|[^\\])f/g,"$1"+j)).replace(/(^|[^\\])TT+/g,"$1"+x)).replace(/(^|[^\\])T/g,"$1"+x.charAt(0));var m=x.toLowerCase();t=(t=t.replace(/(^|[^\\])tt+/g,"$1"+m)).replace(/(^|[^\\])t/g,"$1"+m.charAt(0));var g=-e.getTimezoneOffset(),h=r||!g?"Z":g>0?"+":"-";if(!r){var v=(g=Math.abs(g))%60;h+=u(Math.floor(g/60))+":"+u(v)}t=t.replace(/(^|[^\\])K/g,"$1"+h);var O=(r?e.getUTCDay():e.getDay())+1;return t=(t=(t=(t=(t=t.replace(new RegExp(c[0],"g"),c[O])).replace(new RegExp(s[0],"g"),s[O])).replace(new RegExp(n[0],"g"),n[i])).replace(new RegExp(a[0],"g"),a[i])).replace(/\\(.)/g,"$1")};return r<0?e:r<60?parseInt(r)+"secs":r<3600?parseInt(r/60)+"mins":r<=86400?parseInt(r/3600)+"hrs":r<=172800?"Yesderday at "+n(e,"h:mmtt"):r>172800?r<=604800?n(e,"dddd")+" at "+n(e,"h:mmtt"):t.getFullYear()>e.getFullYear()?n(e,"MMMM d, yyyy"):t.getMonth()>e.getMonth()?n(e,"MMMM d"):n(e,"MMMM d")+" at "+n(e,"h:mmtt"):void 0};var g=m,h=r(1),v=a.a.createContext(),O=function(e){var t=Object(n.useState)(void 0),r=Object(d.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(void 0),u=Object(d.a)(s,2),o=u[0],i=u[1];Object(n.useEffect)((function(){var e=function(){var e=Object(p.a)(l.a.mark((function e(){var t,r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=8;break}return e.next=4,g.verifyToken(t);case 4:r=e.sent,n=r.username,a=r.role,n&&a&&(i({username:n,role:a}),f(t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[a]);var f=function(e){localStorage.setItem("token",e),c(e)},j=Object(n.useCallback)((function(e,t){var r=function(){var r=Object(p.a)(l.a.mark((function r(){var n;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,g.login(e,t);case 2:if(200!==(n=r.sent).status){r.next=8;break}return f(n.data.token),r.abrupt("return",n.status);case 8:return r.abrupt("return",n.status);case 9:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return r()}),[]),x=Object(n.useCallback)((function(){i(void 0),f(void 0)}),[]),m=Object(n.useMemo)((function(){return{token:a,user:o,login:j,logout:x}}),[a,o,j,x]);return Object(h.jsx)(v.Provider,Object(b.a)({value:m},e))},y=function(){var e=a.a.useContext(v);if(!e)throw new Error("useUserContext() must be inside of UserProvider");return e},w=function(){var e=y().login,t=Object(n.useState)(""),r=Object(d.a)(t,2),a=r[0],c=r[1],s=Object(n.useState)(""),u=Object(d.a)(s,2),i=u[0],b=u[1],f=Object(n.useState)(""),j=Object(d.a)(f,2),x=j[0],m=j[1],g=Object(o.f)(),v=function(e,t){t(e.target.value)},O=function(){var t=Object(p.a)(l.a.mark((function t(r){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.preventDefault(),a&&i){t.next=4;break}return m("Ingrese su Usuario y Password"),t.abrupt("return");case 4:return t.next=6,e(a,i);case 6:200===(n=t.sent)?(console.log("log ok"),g("/"),m(""),c(""),b("")):401===n?m("Clave Incorrecta. Intente de nuevo!"):404===n?m("El usuario no existe!"):500===n&&m("Un error ha ocurrido en el servidor.");case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-screen bg-gray-200",children:[Object(h.jsxs)("form",{className:"flex flex-col gap-2 bg-white p-4 rounded-lg w-80 shadow-md",onSubmit:O,children:[Object(h.jsx)("h2",{className:"font-bold text-blue-500 text-2xl",children:"Inicio de Sesion"}),x&&Object(h.jsx)("p",{children:x}),Object(h.jsx)("label",{children:"Usuario"}),Object(h.jsx)("input",{className:"bg-gray-100 p-2 rounded-lg border border-gray-400 \r focus:outline-none focus:ring-4 focus:border-blue-600",type:"text",value:a,placeholder:"Ingrese su usuario",onChange:function(e){return v(e,c)}}),Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{className:"bg-gray-100 p-2 rounded-lg border border-gray-400\r focus:outline-none focus:ring-4 focus:border-blue-600",type:"password",placeholder:"Ingrese su password",onChange:function(e){return v(e,b)},value:i}),Object(h.jsx)("button",{className:"bg-blue-500 p-2 mt-4 rounded-lg text-white font-bold text-lg\r transition duration-100 hover:bg-blue-700",type:"submit",children:"Log In"})]}),Object(h.jsx)("p",{className:"justify-self-start mt-6 text-xs text-gray-600",children:"Programacion Web \xa9 2021 "})]})},k=r(10),N=function(e){var t=e.comment,r=t.user,n=t.description;return Object(h.jsxs)("div",{className:"m-2 px-3 py-1 bg-gray-200 rounded-2xl",children:[Object(h.jsx)("p",{className:"text-xs font-bold",children:r.username}),Object(h.jsx)("p",{className:"text-sm",children:n})]})},M=r(15),S=function(e){var t=e.onClick,r=e.onChange,n=e.value;return Object(h.jsxs)("form",{className:"flex justify-between items-center p-4 m-2 bg-gray-200 rounded-2xl",onSubmit:t,children:[Object(h.jsx)("input",Object(M.a)({className:"flex-1 rounded-l-md",type:"text",value:n,onChange:r},"type","text")),Object(h.jsx)("button",{className:"w-3/12 bg-blue-500 text-red-50 font-bold rounded-r-md",type:"submit",children:"Enviar"})]})},C=function(e){var t=e.title,r=e.image,a=e.description,c=e.token,s=e._id,u=e.editMode,o=e.setReload,i=Object(n.useState)(!1),b=Object(d.a)(i,2),f=b[0],j=b[1],x=Object(n.useState)(!1),m=Object(d.a)(x,2),v=m[0],O=m[1],y=Object(n.useState)(!1),w=Object(d.a)(y,2),k=w[0],N=w[1],M=function(){var e=Object(p.a)(l.a.mark((function e(t){var r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r=new FormData(t.target),n=Object.fromEntries(r.entries()),j(!1),O(!1),N(!1),""!==n.title&&""!==n.description&&""!==n.image){e.next=9;break}return j(!0),e.abrupt("return");case 9:if(!(n.title.length<8||n.title.length>32)){e.next=12;break}return O(!0),e.abrupt("return");case 12:if(!(n.description.length<8)){e.next=15;break}return N(!0),e.abrupt("return");case 15:return console.log(n),e.next=18,g.update(c,s,n);case 18:if(a=e.sent,console.log(a),a){e.next=22;break}return e.abrupt("return");case 22:u(),o(!0);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("form",{className:"bg-white flex flex-col p-2 mb-2 items-center",onSubmit:M,children:[Object(h.jsxs)("div",{className:"text-red-600",children:[f&&Object(h.jsx)("p",{children:"Todos los campos son requeridos!"}),v&&Object(h.jsx)("p",{children:"Titulo debe ser entre 8 y 32 caracteres de largo."}),k&&Object(h.jsx)("p",{children:"Descripcion debe ser minimo 8 caracteres de largo."})]}),Object(h.jsx)("input",{className:"bg-gray-100 px-3 py-1 mb-2 w-4/5 text-sm rounded-full placeholder-gray-800",type:"text",name:"title",id:"title",placeholder:"Titulo del Post",defaultValue:t}),Object(h.jsx)("input",{className:"bg-gray-100 px-3 py-1 mb-2 w-full text-xs rounded-full placeholder-gray-800",type:"text",name:"image",id:"image",placeholder:"URL de la imagen",defaultValue:r}),Object(h.jsx)("textarea",{className:"bg-gray-100 px-2 py-1 mb-2 w-full text-xs rounded-xl placeholder-gray-800",rows:"3",cols:"40",name:"description",id:"description",placeholder:"Descripcion del Post",defaultValue:a}),Object(h.jsxs)("div",{className:"flex row w-full justify-center g-3",children:[Object(h.jsx)("button",{className:"bg-gray-200 p-1 rounded text-gray-600 font-bold text-sm w-1/3",onClick:u,children:"Cancelar"}),Object(h.jsx)("button",{className:"bg-blue-500 p-1 rounded text-white font-bold text-sm w-1/3",type:"submit",children:"Actualizar"})]})]})},$=function(e){var t=e.data,r=e.loggedUser,a=e.token,c=e.userFavs,s=e.setReload,u=t._id,o=t.title,i=t.description,b=t.image,f=t.active,j=t.user,x=t.likes,m=(t.history,t.comments),v=t.createdAt,O=(t.updatedAt,t.__v,j.username===r.username),y=Object(n.useState)(x.some((function(e){return e.username===r.username}))),w=Object(d.a)(y,2),M=w[0],$=w[1],T=Object(n.useState)(x.length),A=Object(d.a)(T,2),z=A[0],D=A[1],P=Object(n.useState)(c),U=Object(d.a)(P,2),F=U[0],E=U[1],I=Object(n.useState)(!1),R=Object(d.a)(I,2),B=R[0],J=R[1],_=Object(n.useState)(""),H=Object(d.a)(_,2),Y=H[0],L=H[1],V=Object(n.useState)(!1),W=Object(d.a)(V,2),q=W[0],K=W[1],Z=Object(n.useState)(!1),G=Object(d.a)(Z,2),Q=G[0],X=G[1],ee=function(){var e=Object(p.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),Y){e.next=3;break}return e.abrupt("return");case 3:if(r={description:Y},n=g.commentPost(a,u,r),L(""),n){e.next=8;break}return e.abrupt("return");case 8:s(!0),J(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.likePost(a,u)){e.next=3;break}return e.abrupt("return");case 3:D(M?z-1:z+1),$(!M);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(p.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.favPost(a,u)){e.next=3;break}return e.abrupt("return");case 3:E(!F);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){O&&K(!q)};return Object(h.jsxs)("div",{className:"bg-white flex flex-col w-full md:rounded-lg md:shadow",children:[Object(h.jsxs)("div",{className:"w-full flex justify-between p-2 md:p-3 items-center",children:[Object(h.jsxs)("div",{className:"flex flex-col",children:[Object(h.jsx)("h2",{className:"font-bold",children:j.username}),Object(h.jsx)("p",{className:"text-xs text-gray-400",children:g.timeSince(v)})]}),O&&!q&&Object(h.jsxs)("div",{className:"flex row gap-3 items-center",children:[Q?Object(h.jsx)("p",{className:"text-red-600 ",children:"\xbfEsta seguro?"}):"",Object(h.jsx)("button",{className:"".concat(Q?"text-white bg-red-600":"text-gray-600 bg-gray-200"," p-2 rounded-full flex justify-center gap-1 items-center"),onClick:function(){if(Q){X(!1),g.toggleActive(a,u)&&s(!0)}else{X(!0);var e=function(){var e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.next=3,t(5e3);case 3:X(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}},type:"button",children:f?Object(h.jsx)(k.f,{size:24}):Object(h.jsx)(k.e,{size:24})}),Object(h.jsx)("button",{className:"text-gray-600 bg-gray-200 p-2 rounded-full flex justify-center gap-1 items-center",onClick:ne,type:"button",children:Object(h.jsx)(k.d,{size:24,color:"#566573"})})]})]}),!q&&Object(h.jsxs)("p",{className:"px-2 md:px-3 md:pb-3 text-sm font-bold",children:[o," ",f?"":Object(h.jsx)("span",{className:"text-red-600",children:"(Desactivada)"})]}),!q&&Object(h.jsx)("p",{className:"px-2 pb-2 md:px-3 md:pb-3 text-sm",children:i}),b&&!q&&Object(h.jsx)("img",{className:"w-full",src:b,alt:j.username}),!q&&Object(h.jsxs)("div",{className:"w-full mt-2 md:mt-3 flex justify-center gap-3",children:[Object(h.jsxs)("button",{className:"text-gray-600 bg-gray-200 w-1/5 p-2 rounded-full flex \n                            justify-center gap-1 items-center ".concat(M&&"text-blue-500 font-bold"),onClick:te,type:"button",children:[M?Object(h.jsx)(k.b,{size:24}):Object(h.jsx)(k.h,{size:24}),0!=z?z:""]}),Object(h.jsx)("button",{className:"text-gray-600 bg-gray-200 w-1/5 p-2 rounded-full flex \n                        justify-center gap-1 items-center ".concat(F&&"text-red-500 font-bold"),onClick:re,type:"button",children:F?Object(h.jsx)(k.a,{size:24}):Object(h.jsx)(k.g,{size:24})}),Object(h.jsxs)("button",{className:"text-gray-600 bg-gray-200 w-1/5 p-2 rounded-full flex \n                        justify-center gap-1 items-center ".concat(B&&"text-green-500 font-bold"),onClick:function(){J(!B)},type:"button",children:[Object(h.jsx)(k.c,{size:24}),0!=m.length?m.length:""]})]}),!q&&Object(h.jsx)("div",{children:Object(h.jsx)(S,{onClick:ee,onChange:function(e){L(e.target.value)},value:Y})}),!q&&B&&Object(h.jsx)("div",{className:"w-full",children:m&&m.map((function(e){return Object(h.jsx)(N,{comment:e},e._id)}))}),q&&O&&Object(h.jsx)(C,{title:o,image:b,description:i,token:a,_id:u,editMode:ne,setReload:s})]})},T=function(e){var t=e.filters,r=e.reload,a=e.setReload,c=e.ownerFilter,s=Object(n.useState)({}),u=Object(d.a)(s,2),o=u[0],i=u[1],b=y(),f=b.token,j=b.user,x=Object(n.useState)({}),m=Object(d.a)(x,2),v=m[0],O=m[1];return Object(n.useEffect)((function(){if(r){var e=function(){var e=Object(p.a)(l.a.mark((function e(){var r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=7;break}return e.next=3,g.getOwned(f,t);case 3:r=e.sent,i(r),e.next=11;break;case 7:return e.next=9,g.getAll(f,t);case 9:n=e.sent,i(n);case 11:return e.next=13,g.getFavs(f);case 13:a=e.sent,O(a);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),a(!1)}}),[t,r,c]),Object(h.jsx)("div",{className:"flex flex-col justify-center \r items-center gap-2 md:gap-4",children:o.data&&v.favorites&&o.data.map((function(e){return Object(h.jsx)($,{loggedUser:j,data:e,token:f,userFavs:v.favorites.some((function(t){return t===e._id})),setReload:a},e._id)}))})},A=r(27),z=function(e){var t=e.setReload,r=Object(n.useState)(!1),a=Object(d.a)(r,2),c=a[0],s=a[1],u=Object(n.useState)(!1),o=Object(d.a)(u,2),i=o[0],b=o[1],f=Object(n.useState)(!1),j=Object(d.a)(f,2),x=j[0],m=j[1],v=y().token,O=function(){var e=Object(p.a)(l.a.mark((function e(r){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n=new FormData(r.target),a=Object.fromEntries(n.entries()),s(!1),b(!1),m(!1),""!==a.title&&""!==a.description&&""!==a.image){e.next=9;break}return s(!0),e.abrupt("return");case 9:if(!(a.title.length<8||a.title.length>32)){e.next=12;break}return b(!0),e.abrupt("return");case 12:if(!(a.description.length<8)){e.next=15;break}return m(!0),e.abrupt("return");case 15:return console.log(a),e.next=18,g.create(v,a);case 18:if(c=e.sent,console.log(c),c){e.next=22;break}return e.abrupt("return");case 22:document.getElementById("new-post").reset(),t(!0);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("form",{name:"new-post",id:"new-post",className:"bg-white flex flex-col p-2 mb-2 items-center \r md:mb-4 md:rounded-lg md:shadow md:py-3 md:px-4",onSubmit:O,children:[Object(h.jsxs)("div",{className:"text-red-600",children:[c&&Object(h.jsx)("p",{children:"Todos los campos son requeridos!"}),i&&Object(h.jsx)("p",{children:"Titulo debe ser entre 8 y 32 caracteres de largo."}),x&&Object(h.jsx)("p",{children:"Descripcion debe ser minimo 8 caracteres de largo."})]}),Object(h.jsx)("input",{className:"bg-gray-100 px-3 py-1 mb-2 w-4/5 text-sm rounded-full placeholder-gray-800",type:"text",name:"title",id:"title",placeholder:"Titulo del Post"}),Object(h.jsx)("input",{className:"bg-gray-100 px-3 py-1 mb-2 w-full text-xs rounded-full placeholder-gray-800",type:"text",name:"image",id:"image",placeholder:"URL de la imagen"}),Object(h.jsx)("textarea",{className:"bg-gray-100 px-2 py-1 mb-2 w-full text-xs rounded-xl placeholder-gray-800",rows:"3",cols:"40",name:"description",id:"description",placeholder:"Descripcion del Post"}),Object(h.jsx)("button",{className:"bg-blue-500 p-1 rounded text-white font-bold text-sm w-1/3",type:"submit",children:"Publicar"})]})},D=function(e){var t=e.text,r=e.onClick,n=void 0===r?function(){}:r;return Object(h.jsx)("button",{className:"w-auto bg-blue-500 rounded text-white py-2 px-4",onClick:function(){n()},children:t})},P=function(){var e=y(),t=e.logout,r=e.token,a=e.user,c=Object(o.f)(),s=Object(n.useState)({limit:15,page:0}),u=Object(d.a)(s,2),i=u[0],l=u[1],p=Object(n.useState)(!0),b=Object(d.a)(p,2),f=b[0],j=b[1],x=Object(n.useState)(!1),m=Object(d.a)(x,2),g=m[0],v=m[1];Object(n.useEffect)((function(){null==r&&c("/login")}),[]);return Object(h.jsx)("div",{className:"bg-gray-400 md:bg-gray-200",children:Object(h.jsxs)("div",{className:"w-full md:w-3/4 lg:max-w-3xl flex flex-col m-auto",children:[Object(h.jsxs)("div",{className:"bg-white flex justify-between mb-2 md:my-3 md:rounded-lg md:shadow",children:[Object(h.jsxs)("h2",{className:"mt-2 ml-2",children:["Bienvenido ",Object(h.jsx)("span",{className:"text-blue-500 font-bold",children:null===a||void 0===a?void 0:a.username})]}),Object(h.jsxs)("div",{className:"flex items-center",children:["admin"===(null===a||void 0===a?void 0:a.role)&&Object(h.jsx)("button",{className:"text-xs font-bold bg-gray-200 rounded-full mr-1 px-2 \n                            h-8 ".concat(g&&"font-bold bg-blue-500"),onClick:function(){v(!g),j(!0)},children:"My Posts"}),Object(h.jsx)("button",{onClick:function(){t(),console.log("cleared"),c("/login"),console.log("logged out")},type:"button",className:"bg-gray-200 rounded-full p-1 m-1 mr-2",children:Object(h.jsx)(A.a,{size:28})})]})]}),"admin"===(null===a||void 0===a?void 0:a.role)&&Object(h.jsx)(z,{setReload:j}),Object(h.jsx)(T,{filters:i,reload:f,setReload:j,ownerFilter:g}),Object(h.jsxs)("div",{className:"flex justify-center py-3 gap-10",children:[0!==i.page&&Object(h.jsx)(D,{text:"Anterior",onClick:function(){var e=i.page;e>0&&(j(!0),l({limit:15,page:e-1}))}}),Object(h.jsx)(D,{text:"Siguiente",onClick:function(){var e=i.page;j(!0),l({limit:15,page:e+1})}})]})]})})},U=function(){return Object(h.jsx)(u.a,{basename:"/pw2021",children:Object(h.jsxs)(o.c,{children:[Object(h.jsx)(o.a,{exact:!0,path:"/",element:Object(h.jsx)(P,{})}),Object(h.jsx)(o.a,{exact:!0,path:"/login",element:Object(h.jsx)(w,{})})]})})};s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(O,{children:Object(h.jsx)(U,{})})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.783236cd.chunk.js.map